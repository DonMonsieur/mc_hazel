<!doctype html>
<html lang="tl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>For You ğŸŒ»</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&display=swap"
    />
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <section class="cssletter" aria-label="Sunflower Love Letter">
      <header class="sun-header" aria-hidden="true">
        <h1>For You ğŸŒ»</h1>
        <p>Just a little sunflower letter for you.</p>
      </header>

      <div class="letters">
        <div
          class="sun-gate"
          id="sunGate"
          role="dialog"
          aria-labelledby="gateTitle"
          aria-modal="true"
        >
          <div class="sun-gate-card">
            <div class="sun-gate-badge" aria-hidden="true">ğŸŒ»</div>

            <h2 id="gateTitle" class="sun-gate-title">Sunflower Password</h2>
            <p class="sun-gate-sub">What is your favorite <b>pet</b>?</p>

            <form class="sun-gate-form" id="gateForm" novalidate>
              <!-- <label class="sun-gate-label" for="gateInput">Secret word</label> -->
              <div class="sun-gate-row">
                <input
                  id="gateInput"
                  class="sun-gate-input"
                  type="text"
                  inputmode="text"
                  autocomplete="off"
                  autocapitalize="none"
                  spellcheck="false"
                  placeholder="Enter your secret word"
                  aria-describedby="gateHint gateError"
                />
                <button class="sun-gate-btn" type="submit">Bloom</button>
              </div>

              <p id="gateHint" class="sun-gate-hint">
                Hint: itâ€™s literally <b>keep</b> ğŸ™‚
              </p>
              <p id="gateError" class="sun-gate-error" aria-live="polite"></p>
            </form>
          </div>
        </div>

        <div class="letter is-locked" id="1" tabindex="0">
          <button class="closeLetter" title="Close letter">Close letter</button>

          <p>
            Gusto ko lang sabihin to ha, walang script, walang pa-impress.
            Napansin ko lang na habang tumatagal, mas nagiging mahalaga ka
            saâ€™kin. Hindi dahil may kailangan ako, kundi dahilâ€¦ ikaw ka. Yung
            simpleng usapan lang natin, sapat na. Yung presensya mo, nakaka-gaan
            ng loob. Hindi ako nagmamadali saâ€™yo. Gusto kitang makilala nang
            buo, dahan-dahan. Walang pressure, walang pilitan Kung ano lang yung
            totoo.
            <br />
            <br />
            Gusto ko ring malaman mo na hindi aksidente at hindi rin pinilit ang
            lahat ng nararamdaman ko ngayon. At alam mo yan since day one 2019
            pa, gusto na kita kahit hindi pa kita lubos na kilala. Pero ngayon,
            habang unti-unti kitang nakikilala sa bawat kwento, tawa, at
            simpleng usapan, hindi ko namalayan na hinahanap na kita sa
            araw-araw ko. Ikaw yung tipo ng tao na kahit tahimik lang ang
            usapan, ramdam mong may saysay. Kahit simpleng â€œkamusta ka?â€ o
            â€œhello,â€ may lambing na agad. Ganun ka. <br />
            <br />
            Hindi ko sasabihing perpekto ako, at hindi ko rin ipapangako na
            magiging perpekto ang lahat. Pero kung may isang bagay akong
            sigurado, ito yon totoo ang intensyon ko sayo. Hindi kita
            nililigawan para lang masabing may nililigawan ako, kundi dahil
            pinipili kita. Araw-araw. <br />
            <br />
            Kung minsan mapagod ka, pwede kang magpahinga. Nandito lang ako,
            hindi para mag-demand, kundi para sumuporta. Kung magdududa ka,
            nandito ako para patunayan. At kung ngumiti ka, gusto kong maging
            isa sa mga dahilan nun. Hindi ako nagmamadali, kasi alam ko ang mga
            bagay na totoo, ay hindi basta nawawala at hindi agad lumilisan.
            <br />
            <br />
            Hazel, sana sa bawat araw na dumadaan, mas maramdaman mo kung gaano
            kita nirerespeto, pinahahalagahan, at hinahangaan. At kung darating
            man yung araw na magtanong ka kung bakit ako nandito pa rin sagot ko
            lang, kasi ikaw yung worth it paglaanan ng oras, at hindi ako
            nagsasawang piliin ka.
          </p>

          <cite>MC</cite>
        </div>
      </div>
    </section>

    <script>
      const REQUIRED_WORD = "keep";

      const gate = document.getElementById("sunGate");
      const form = document.getElementById("gateForm");
      const input = document.getElementById("gateInput");
      const errorEl = document.getElementById("gateError");
      const letter = document.querySelector(".letter");

      function normalize(v) {
        return (v || "").trim().toLowerCase();
      }

      function unlock() {
        letter.classList.remove("is-locked");
        gate.classList.add("is-hidden");
      }

      function lockWithMessage(msg) {
        letter.classList.add("is-locked");
        errorEl.textContent = msg;
      }

      // Start locked (in case class missing)
      letter.classList.add("is-locked");

      // Submit validation
      form.addEventListener("submit", (e) => {
        e.preventDefault();
        const value = normalize(input.value);

        if (value === REQUIRED_WORD) {
          unlock();
          input.value = "";
          return;
        }

        lockWithMessage("Oops ğŸŒ» Secret word is not correct. Try again.");
        input.focus();
        input.select();
      });

      // Optional: Enter key works naturally; also clear error while typing
      input.addEventListener("input", () => {
        errorEl.textContent = "";
      });

      // Close letter (keeps your behavior)
      document.querySelectorAll(".closeLetter").forEach((button) => {
        button.addEventListener("click", (e) => {
          e.preventDefault();
          const l = e.target.closest(".letter");
          if (l) l.style.display = "none";
        });
      });

      // Nice UX: focus input on load
      window.addEventListener("load", () => input.focus());
    </script>
  </body>
</html>
